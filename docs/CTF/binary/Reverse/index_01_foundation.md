# 题目类型

* SMC: Self Modifying Code

# 什么变量在堆内存里存放，什么变量在栈内存里存放


1栈 - 有编译器自动分配释放
2堆 - 一般由程序员分配释放，若程序员不释放，程序结束时可能由OS回收
3全局区（静态区），全局变量和静态变量的存储是放在一块的，初始化的全局变量和静态变量在一块区域，未初始化的全局变量和未初始化的静态变量在相邻的另一块区域。 程序结束释放。
4另外还有一个专门放常量的地方。 - 程序结束释放

```c
int a = 0; // 全局初始化区
char *p1;  // 全局未初始化区
void main() {
  int b;                   // 栈
  char s[] = "abc ";       // 栈
  char *p2;        ;       // 栈
  char *p3 = "123456 ";    // 123456\0在常量区，p3在栈上。
  static int c =0；        // 全局（静态）初始化区
  p1 = (char *)malloc(10);
  p2 = (char *)malloc(20);
  // 分配得来得10和20字节的区域就在堆区
  strcpy(p1, "123456 "); // 123456\0放在常量区，编译器可能会将它与p3所指向的 "123456 "优化成一块。
}
```